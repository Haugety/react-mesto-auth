(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/mesto-logo.c6f11019.svg"},27:function(e,t,a){e.exports=a(38)},32:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(21),c=a.n(i),s=a(5),r=(a(32),a(25)),l=a(1),u=a(2),p=a(14),m=a(15),_={url:/^(https?|chrome):\/\/[^\s$.?#].[^\s]*$/gm,name:/^[a-zA-Z\u0430-\u044f\u0451\u0410-\u042f\u0401 ]*$/,email:/.+@.+\..+/,password:/[\S]{0,}\s/},d={baseUrl:"https://mesto.nomoreparties.co/v1/cohort-13",baseUrlAuth:"https://auth.nomoreparties.co",headers:{authorization:"2cf602a9-f630-4a8e-9437-bb139a960cac","Content-Type":"application/json"}},f=new(function(){function e(t){var a=this;Object(p.a)(this,e),this.removeCard=function(e){return fetch("".concat(a._options.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:a._options.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))},this.changeLikeCardStatus=function(e,t){return t?fetch("".concat(a._options.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:a._options.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})):fetch("".concat(a._options.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:a._options.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))},this._options=t}return Object(m.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this._options.baseUrl,"/users/me"),{headers:this._options.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._options.baseUrl,"/users/me"),{method:"PATCH",headers:this._options.headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this._options.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._options.headers,body:JSON.stringify({avatar:e.avatar})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._options.baseUrl,"/cards"),{headers:this._options.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"setCard",value:function(e){return fetch("".concat(this._options.baseUrl,"/cards"),{method:"POST",headers:this._options.headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}}]),e}())(d),h=new(function(){function e(t){Object(p.a)(this,e),this._options=t}return Object(m.a)(e,[{key:"register",value:function(e){return fetch("".concat(this._options.baseUrlAuth,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e.password,email:e.email})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"authorize",value:function(e){return fetch("".concat(this._options.baseUrlAuth,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e.password,email:e.email})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getContent",value:function(e){return fetch("".concat(this._options.baseUrlAuth,"/users/me"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}}]),e}())(d),b=a(26),g=function(e){var t=e.component,a=Object(b.a)(e,["component"]);return o.a.createElement(u.b,null,(function(){return a.loggedIn?o.a.createElement(t,a):o.a.createElement(u.a,{to:"./"})}))},E=a(24),v=a(23),N=a.n(v);var C=function(e){var t=e.email,a=e.onSignOut,n=Object(E.a)(),i=o.a.useState(!1),c=Object(l.a)(i,2),r=c[0],p=c[1];function m(){a(),p(!1)}return o.a.createElement("header",{className:"header"},o.a.createElement(u.b,{path:"/main"},n<=767?o.a.createElement("div",{className:"header__mobile-menu ".concat(r?"header__mobile-menu_opened":"")},o.a.createElement("h2",{className:"header__email header__email_mobile"},t),o.a.createElement(s.b,{to:"/signin",className:"header__link header__link_mobile",onClick:m},"\u0412\u044b\u0439\u0442\u0438")):null),o.a.createElement("div",{className:"header__main-menu"},o.a.createElement("img",{src:N.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \xab\u041c\u0435\u0441\u0442\u043e \u0420\u043e\u0441\u0441\u0438\u044f\xbb",className:"header__logo"}),o.a.createElement(u.d,null,o.a.createElement(u.b,{path:"/signup"},o.a.createElement(s.b,{to:"/signin",className:"header__link"},"\u0412\u043e\u0439\u0442\u0438")),o.a.createElement(u.b,{path:"/signin"},o.a.createElement(s.b,{to:"/signup",className:"header__link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),o.a.createElement(u.b,{path:"/main"},n<=767?o.a.createElement("button",{type:"button",className:"header__mobile-button ".concat(r?"header__mobile-button_close":""),onClick:r?function(){p(!1)}:function(){p(!0)}}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"header__info"},o.a.createElement("h2",{className:"header__email"},t),o.a.createElement(s.b,{to:"/signin",className:"header__link header__link_main",onClick:m},"\u0412\u044b\u0439\u0442\u0438")))))))},k=o.a.createContext();var j=function(e){var t=e.card,a=e.onCardClick,i=e.onCardLike,c=e.onCardDelete,s=Object(n.useContext)(k),r=t.owner._id===s._id,l="trash-button ".concat(r?"trash-button_active":"trash-button_inactive"),u=t.likes.some((function(e){return e._id===s._id})),p="like-button ".concat(u?"like-button_active":"like-button_inactive");return o.a.createElement("li",{className:"cards__element"},o.a.createElement("img",{alt:t.name,className:"cards__image",src:t.link,onClick:function(){a({link:t.link,name:t.name})}}),o.a.createElement("button",{type:"button",className:l,onClick:function(){c(t)}}),o.a.createElement("div",{className:"cards__row"},o.a.createElement("h3",{className:"cards__title"},t.name),o.a.createElement("div",{className:"cards__column"},o.a.createElement("button",{type:"button",className:p,onClick:function(){i(t)}}),o.a.createElement("span",{className:"like-button__amount"},t.likes.length))))};var O=function(e){var t=e.cards,a=e.onEditProfile,i=e.onAddPlace,c=e.onEditAvatar,s=e.onCardClick,r=e.onCardLike,l=e.onCardDelete,u=Object(n.useContext)(k);return o.a.createElement("main",{className:"content"},o.a.createElement("section",{className:"profile"},o.a.createElement("div",{className:"profile__avatar"},o.a.createElement("img",{alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f",src:u.avatar,className:"profile__image"}),o.a.createElement("button",{type:"button",className:"profile__edit-avatar",onClick:c},o.a.createElement("svg",{className:"profile__edit-avatar_icon",width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M26 3.45351L6.76981 22.7932L3.33585 19.2903L22.517 0L26 3.45351ZM0 26L5.10189 24.4706L1.52075 21.0171L0 26Z",fill:"white"})))),o.a.createElement("div",{className:"profile__info"},o.a.createElement("div",{className:"profile__row"},o.a.createElement("h1",{className:"profile__title"},u.name),o.a.createElement("button",{type:"button",className:"edit-button",onClick:a},o.a.createElement("svg",{className:"edit-button__icon",width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M10 1.328L2.604 8.767 1.283 7.419 8.66 0 10 1.328zM0 10l1.962-.588L.585 8.083 0 10z",fill:"#fff"})))),o.a.createElement("p",{className:"profile__subtitle"},u.about)),o.a.createElement("button",{type:"button",className:"add-button",onClick:i},o.a.createElement("svg",{className:"add-button__icon",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M22 9.77778H12.2222V0H9.77778V9.77778H0V12.2222H9.77778V22H12.2222V12.2222H22V9.77778Z",fill:"white"})))),o.a.createElement("ul",{className:"cards list"},t.map((function(e){return o.a.createElement(j,{key:e._id,card:e,onCardClick:s,onCardLike:r,onCardDelete:l})}))))},w=a(6),L=a(4);var I=function(e){var t=e.onSubmit,a=o.a.useState(""),n=Object(l.a)(a,2),i=n[0],c=n[1],r=o.a.useState({email:"",password:""}),u=Object(l.a)(r,2),p=u[0],m=u[1];function d(e){var t=e.target,a=t.name,n=t.value,o=t.type;m(Object(L.a)(Object(L.a)({},p),{},Object(w.a)({},o,function(e,t){return"password"===t&&e.length<6?e.includes(" ")?"\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b":"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043a\u043e\u0440\u043e\u0447\u0435 6 \u0441\u0438\u043c\u0432. \u0414\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u0441\u0435\u0439\u0447\u0430\u0441: ".concat(e.length," \u0441\u0438\u043c\u0432."):"email"!==t||_.email.test(e)?"":"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 Email-\u0430\u0434\u0440\u0435\u0441"}(n,o)))),c(Object(L.a)(Object(L.a)({},i),{},Object(w.a)({},a,n)))}return o.a.createElement("main",{className:"sign"},o.a.createElement("h1",{className:"sign__title"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),o.a.createElement("form",{className:"sign-form",onSubmit:function(e){e.preventDefault(),t({email:i.signupEmailInput,password:i.signupPasswordInput})},noValidate:!0},o.a.createElement("fieldset",{className:"sign-form__set"},o.a.createElement("label",{className:"sign-form__field"},o.a.createElement("input",{type:"email",placeholder:"Email",autoComplete:"on",className:"sign-form__input",onChange:d,onFocus:d,id:"signup-email-input",name:"signupEmailInput",maxLength:"40",required:!0}),o.a.createElement("span",{className:"sign-form__input-error sign-form__input-error_active",id:"name-input-error"},p.email)),o.a.createElement("label",{className:"sign-form__field"},o.a.createElement("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",autoComplete:"off",className:"sign-form__input",onChange:d,onFocus:d,id:"signup-password-input",name:"signupPasswordInput",minLength:"6",maxLength:"20",required:!0}),o.a.createElement("span",{className:"sign-form__input-error sign-form__input-error_active",id:"name-input-error"},p.password)),o.a.createElement("button",{type:"submit",className:"sign-form__save-button ".concat(p.email||p.password||!i.signupEmailInput||!i.signupPasswordInput?"sign-form__save-button_inactive":""),disabled:p.email||p.password||!i.signupEmailInput||!i.signupPasswordInput},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))),o.a.createElement("h3",{className:"sign__question"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",o.a.createElement(s.b,{to:"/signin",className:"sign__link"},"\u0412\u043e\u0439\u0442\u0438")))};var y=function(e){var t=e.onSubmit,a=o.a.useState(""),n=Object(l.a)(a,2),i=n[0],c=n[1],r=o.a.useState(""),u=Object(l.a)(r,2),p=u[0],m=u[1];function _(e){var t=e.target,a=t.name,n=t.value;m(""),c(Object(L.a)(Object(L.a)({},i),{},Object(w.a)({},a,n)))}return o.a.createElement("main",{className:"sign"},o.a.createElement("h1",{className:"sign__title"},"\u0412\u0445\u043e\u0434"),o.a.createElement("form",{className:"sign-form",onSubmit:function(e){e.preventDefault(),i.signinEmailInput&&i.signinPasswordInput&&t({email:i.signinEmailInput,password:i.signinPasswordInput}).then((function(e){e&&m("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}))},noValidate:!0},o.a.createElement("fieldset",{className:"sign-form__set"},o.a.createElement("label",{className:"sign-form__field"},o.a.createElement("input",{type:"email",placeholder:"Email",autoComplete:"on",className:"sign-form__input",onChange:_,onFocus:_,id:"signin-email-input",name:"signinEmailInput",minLength:"2",maxLength:"40",required:!0}),o.a.createElement("span",{className:"sign-form__input-error sign-form__input-error_active",id:"name-input-error"},p)),o.a.createElement("label",{className:"sign-form__field"},o.a.createElement("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",autoComplete:"off",className:"sign-form__input",onChange:_,onFocus:_,id:"signin-password-input",name:"signinPasswordInput",minLength:"6",maxLength:"20",required:!0}),o.a.createElement("span",{className:"sign-form__input-error sign-form__input-error_active",id:"name-input-error"},p)),o.a.createElement("button",{type:"submit",className:"sign-form__save-button"},"\u0412\u043e\u0439\u0442\u0438"))),o.a.createElement("h3",{className:"sign__question"},"\u0415\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",o.a.createElement(s.b,{to:"/signup",className:"sign__link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))};var S=function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))};var x=function(e){var t=e.title,a=e.name,n=e.isOpen,i=e.onClose,c=e.onSubmit,s=e.children;return o.a.createElement("section",{className:"popup popup_".concat(a," ").concat(n?"popup_opened":"")},o.a.createElement("form",{className:"popup__container popup__container_".concat(a),name:a,onSubmit:c,noValidate:!0},o.a.createElement("button",{type:"button",className:"popup__close-button",onClick:i}),o.a.createElement("h3",{className:"popup__title popup__title_".concat(a)},t),s))};var P=function(e){var t=e.isOpen,a=e.onClose,i=e.onUpdateUser,c=e.isLoading,s=o.a.useState(""),r=Object(l.a)(s,2),u=r[0],p=r[1],m=Object(n.useState)({nameInput:"",descriptionInput:""}),d=Object(l.a)(m,2),f=d[0],h=d[1],b=Object(n.useContext)(k);function g(e){var t=e.target,a=t.name,n=t.value;h(Object(L.a)(Object(L.a)({},f),{},Object(w.a)({},a,function(e,t){return e.length<2?"\u0422\u0435\u043a\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043a\u043e\u0440\u043e\u0447\u0435 2 \u0441\u0438\u043c\u0432. \u0414\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u0441\u0435\u0439\u0447\u0430\u0441: ".concat(e.length," \u0441\u0438\u043c\u0432."):"nameInput"!==t||_.name.test(e)?"":"\u0422\u0435\u043a\u0441\u0442 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0446\u0438\u0444\u0440\u044b \u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u044b."}(n,a)))),p(Object(L.a)(Object(L.a)({},u),{},Object(w.a)({},a,n)))}return o.a.useEffect((function(){p({nameInput:b.name,descriptionInput:b.about}),h({nameInput:"",descriptionInput:""})}),[b,t]),o.a.createElement(x,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),i({name:u.nameInput,about:u.descriptionInput})}},o.a.createElement("fieldset",{className:"popup__set"},o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",value:u.nameInput||"",onChange:g,onFocus:g,autoComplete:"off",className:"popup__input popup__input_text_name",id:"name-input",name:"nameInput",minLength:"2",maxLength:"40",required:!0,pattern:"[A-Za-z\u0410-\u042f\u0401\u0430-\u044f\u0451 -]{1,}"}),o.a.createElement("span",{className:"popup__input-error popup__input-error_active",id:"name-input-error"},f.nameInput)),o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:u.descriptionInput||"",onChange:g,onFocus:g,autoComplete:"off",className:"popup__input popup__input_text_description",id:"description-input",name:"descriptionInput",minLength:"2",maxLength:"200",required:!0}),o.a.createElement("span",{className:"popup__input-error popup__input-error_active",id:"description-input-error"},f.descriptionInput)),o.a.createElement("button",{type:"submit",className:"popup__save-button ".concat(f.nameInput||f.descriptionInput||u.nameInput===b.name&&u.descriptionInput===b.about?"popup__save-button_inactive":""),disabled:c||f.nameInput||f.descriptionInput||u.nameInput===b.name&&u.descriptionInput===b.about},c?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))};var U=function(e){var t=e.isOpen,a=e.onClose,i=e.onUpdateAvatar,c=e.isLoading,s=Object(n.useRef)(""),r=Object(n.useState)(""),u=Object(l.a)(r,2),p=u[0],m=u[1];function d(e){var t=e.target.value;m(_.url.test(t)?"":"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 url-\u0430\u0434\u0440\u0435\u0441")}return o.a.useEffect((function(){s.current.value="",m("")}),[t]),o.a.createElement(x,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),i({avatar:s.current.value})}},o.a.createElement("fieldset",{className:"popup__set"},o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{ref:s,onChange:d,onFocus:d,type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",autoComplete:"off",className:"popup__input popup__input_text_link",id:"link-avatar-input",name:"avatarInput",required:!0}),o.a.createElement("span",{className:"popup__input-error popup__input-error_active",id:"link-avatar-input-error"},p)),o.a.createElement("button",{type:"submit",className:"popup__save-button ".concat(p||!s.current.value?"popup__save-button_inactive":""),disabled:c||p||!s.current.value},c?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))};var A=function(e){var t=e.isOpen,a=e.onClose,i=e.onAddPlace,c=e.isLoading,s=o.a.useState(""),r=Object(l.a)(s,2),u=r[0],p=r[1],m=Object(n.useState)({text:"",url:""}),d=Object(l.a)(m,2),f=d[0],h=d[1];function b(e){var t=e.target,a=t.name,n=t.value,o=t.type;h(Object(L.a)(Object(L.a)({},f),{},Object(w.a)({},o,function(e,t){return"text"===t&&e.length<1?"\u0422\u0435\u043a\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043a\u043e\u0440\u043e\u0447\u0435 1 \u0441\u0438\u043c\u0432. \u0414\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u0441\u0435\u0439\u0447\u0430\u0441: ".concat(e.length," \u0441\u0438\u043c\u0432."):"url"!==t||_.url.test(e)?"":"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 url-\u0430\u0434\u0440\u0435\u0441"}(n,o)))),p(Object(L.a)(Object(L.a)({},u),{},Object(w.a)({},a,n)))}return o.a.useEffect((function(){p({placeInput:"",linkInput:""}),h({text:"",url:""})}),[t]),o.a.createElement(x,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),i({name:u.placeInput,link:u.linkInput})}},o.a.createElement("fieldset",{className:"popup__set"},o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:u.placeInput||"",onChange:b,onFocus:b,autoComplete:"off",className:"popup__input popup__input_text_place",id:"place-input",name:"placeInput",minLength:"1",maxLength:"30",required:!0}),o.a.createElement("span",{className:"popup__input-error popup__input-error_active",id:"place-input-error"},f.text)),o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:u.linkInput||"",onChange:b,onFocus:b,autoComplete:"off",className:"popup__input popup__input_text_link",id:"link-input",name:"linkInput",required:!0}),o.a.createElement("span",{className:"popup__input-error popup__input-error_active",id:"link-input-error"},f.url)),o.a.createElement("button",{type:"submit",className:"popup__save-button ".concat(f.text||f.url||!u.placeInput||!u.linkInput?"popup__save-button_inactive":""),disabled:c||f.text||f.url||!(u.placeInput&&u.linkInput)},c?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))};var D=function(e){var t=e.isOpen,a=e.selectedCardLink,n=e.selectedCardName,i=e.onClose;return o.a.createElement("section",{className:"popup ".concat(t&&"popup_opened")},o.a.createElement("figure",{className:"popup__image-container"},o.a.createElement("img",{alt:n,src:a,className:"popup__image"}),o.a.createElement("figcaption",{className:"popup__caption"},n),o.a.createElement("button",{type:"button",className:"popup__close-button",onClick:i})))};var F=function(e){var t=e.isOpen,a=e.onClose,n=e.onConfirm,i=e.isLoading;return o.a.createElement(x,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"trash",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n()}},o.a.createElement("button",{type:"submit",className:"popup__save-button",disabled:i},i?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430"))};var M=function(e){var t=e.isOpen,a=e.onClose,n=e.type,i=e.text;return o.a.createElement("section",{className:"popup popup_infotool ".concat(t?"popup_opened":"")},o.a.createElement("div",{className:"popup__container popup__container_infotool"},o.a.createElement("button",{type:"button",className:"popup__close-button",onClick:a}),n?o.a.createElement(o.a.Fragment,null,o.a.createElement("svg",{className:"popup__signup-icon",width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M117 60C117 91.4802 91.4802 117 60 117C28.5198 117 3 91.4802 3 60C3 28.5198 28.5198 3 60 3C91.4802 3 117 28.5198 117 60ZM120 60C120 93.1371 93.1371 120 60 120C26.8629 120 0 93.1371 0 60C0 26.8629 26.8629 0 60 0C93.1371 0 120 26.8629 120 60ZM57.5502 76.888L86.7676 48.888L81.2324 43.112L54.4277 68.7999L39.3496 57.8561L34.6504 64.3305L52.433 77.2372L55.1375 79.2001L57.5502 76.888Z",fill:"black"})),o.a.createElement("h3",{className:"popup__title popup__title_infotool"},i.success)):o.a.createElement(o.a.Fragment,null,o.a.createElement("svg",{className:"popup__signup-icon",width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M60 117C91.4802 117 117 91.4802 117 60C117 28.5198 91.4802 3 60 3C28.5198 3 3 28.5198 3 60C3 91.4802 28.5198 117 60 117ZM60 120C93.1371 120 120 93.1371 120 60C120 26.8629 93.1371 0 60 0C26.8629 0 0 26.8629 0 60C0 93.1371 26.8629 120 60 120ZM55.0503 60.707L36.6655 42.3223L42.3224 36.6654L60.7071 55.0502L78.3848 37.3726L84.0416 43.0294L66.364 60.707L83.3346 77.6776L77.6777 83.3345L60.7071 66.3639L43.0294 84.0416L37.3726 78.3848L55.0503 60.707Z",fill:"#FD0707"})),o.a.createElement("h3",{className:"popup__title popup__title_infotool"},i.fail))))};var T=function(){var e=o.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],i=o.a.useState(!1),c=Object(l.a)(i,2),s=c[0],p=c[1],m=o.a.useState(!1),_=Object(l.a)(m,2),d=_[0],b=_[1],E=o.a.useState(!1),v=Object(l.a)(E,2),N=v[0],j=v[1],w=o.a.useState(!1),L=Object(l.a)(w,2),x=L[0],T=L[1],q=o.a.useState(!1),Z=Object(l.a)(q,2),V=Z[0],z=Z[1],H=o.a.useState(!1),B=Object(l.a)(H,2),J=B[0],R=B[1],$=o.a.useState([]),G=Object(l.a)($,2),K=G[0],Q=G[1],W=o.a.useState({link:"",name:""}),X=Object(l.a)(W,2),Y=X[0],ee=X[1],te=o.a.useState([]),ae=Object(l.a)(te,2),ne=ae[0],oe=ae[1],ie=o.a.useState({}),ce=Object(l.a)(ie,2),se=ce[0],re=ce[1],le=o.a.useState(!1),ue=Object(l.a)(le,2),pe=ue[0],me=ue[1],_e=o.a.useState(!1),de=Object(l.a)(_e,2),fe=de[0],he=de[1],be=o.a.useState({id:"",email:""}),ge=Object(l.a)(be,2),Ee=ge[0],ve=ge[1],Ne=Object(u.g)();o.a.useEffect((function(){Promise.all([f.getUserInfo(),f.getInitialCards()]).then((function(e){re(e[0]),Q(e[1])})).catch((function(e){console.log(e)}))}),[]),o.a.useEffect((function(){function e(e){"Escape"===e.key&&ke()}function t(e){e.target.classList.contains("popup_opened")&&ke()}return document.addEventListener("click",t),document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("click",t)}}),[]);var Ce=o.a.useCallback((function(){var e=localStorage.getItem("jwt");e&&h.getContent(e).then((function(e){e&&(ve({id:e.data._id,email:e.data.email}),he(!0),Ne.push("/"))})).catch((function(e){console.log(e),localStorage.removeItem("jwt"),R(!1),z(!0),Ne.push("/signin")}))}),[Ne,fe]);function ke(){n(!1),p(!1),b(!1),j(!1),T(!1),z(!1),me(!1)}return o.a.useEffect((function(){Ce()}),[Ce]),o.a.createElement(k.Provider,{value:se},o.a.createElement("div",{className:"page"},o.a.createElement(C,{email:Ee.email,onSignOut:function(){localStorage.removeItem("jwt"),Ne.push("/signin"),he(!1)}}),o.a.createElement(u.d,null,o.a.createElement(g,{path:"/main",component:O,cards:K,onEditProfile:function(){p(!0)},onAddPlace:function(){b(!0)},onEditAvatar:function(){n(!0)},onCardClick:function(e){j(!0),ee({link:e.link,name:e.name})},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===se._id}));f.changeLikeCardStatus(e._id,t).then((function(t){var a=K.map((function(a){return a._id===e._id?t:a}));Q(a)})).catch((function(e){console.log(e)}))},onCardDelete:function(e){oe(e),T(!0)},loggedIn:fe}),o.a.createElement(u.b,{path:"/signup"},o.a.createElement(I,{onSubmit:function(e){h.register(e).then((function(e){R(!0),z(!0),Ne.push("/")})).catch((function(e){console.log(e),R(!1),z(!0)}))}})),o.a.createElement(u.b,{path:"/signin"},o.a.createElement(y,{onSubmit:function(e){return h.authorize(e).then((function(e){he(!0),localStorage.setItem("jwt",e.token),Ne.push("/")})).catch((function(e){return console.log(e),R(!1),z(!0),e}))}})),o.a.createElement(u.b,{exact:!0,path:"/"},fe?o.a.createElement(u.a,{to:"/main"}):o.a.createElement(u.a,{to:"/signin"}))),o.a.createElement(U,{isOpen:a,onClose:ke,onUpdateAvatar:function(e){me(!0),f.setUserAvatar(e).then((function(e){re(e)})).then((function(){ke()})).catch((function(e){console.log(e)}))},isLoading:pe}),o.a.createElement(P,{isOpen:s,onClose:ke,onUpdateUser:function(e){me(!0),f.setUserInfo(e).then((function(e){re(e)})).then((function(){ke()})).catch((function(e){console.log(e)}))},isLoading:pe}),o.a.createElement(A,{isOpen:d,onClose:ke,onAddPlace:function(e){me(!0),f.setCard(e).then((function(e){Q([e].concat(Object(r.a)(K)))})).then((function(){ke()})).catch((function(e){console.log(e)}))},isLoading:pe}),o.a.createElement(D,{isOpen:N,selectedCardLink:Y.link,selectedCardName:Y.name,onClose:ke}),o.a.createElement(F,{isOpen:x,onClose:ke,onConfirm:function(){me(!0),f.removeCard(ne._id).then((function(){var e=K.filter((function(e){return e._id!==ne._id}));Q(e)})).then((function(){ke()})).catch((function(e){console.log(e)}))},isLoading:pe}),o.a.createElement(M,{isOpen:V,onClose:ke,type:J,text:{success:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!",fail:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."}}),o.a.createElement(S,null)))};c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,{basename:"/react-mesto-auth"},o.a.createElement(T,null))),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.687115a0.chunk.js.map