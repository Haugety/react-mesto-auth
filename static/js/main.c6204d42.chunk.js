(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/mesto-logo.c6f11019.svg"},25:function(e,t,a){e.exports=a(36)},30:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(17),c=a.n(i),r=a(4),s=(a(30),a(23)),l=a(1),u=a(2),m=a(18),p=a(19),_={url:/^(https?|chrome):\/\/[^\s$.?#].[^\s]*$/gm,name:/^[a-zA-Z\u0430-\u044f\u0451\u0410-\u042f\u0401 ]*$/,email:/.+@.+\..+/,password:/[\S]{0,}\s/},d={baseUrl:"https://mesto.nomoreparties.co/v1/cohort-13",baseUrlAuth:"https://auth.nomoreparties.co",headers:{authorization:"2cf602a9-f630-4a8e-9437-bb139a960cac","Content-Type":"application/json"}},f=new(function(){function e(t){var a=this;Object(m.a)(this,e),this.removeCard=function(e){return fetch("".concat(a._options.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:a._options.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))},this.changeLikeCardStatus=function(e,t){return t?fetch("".concat(a._options.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:a._options.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})):fetch("".concat(a._options.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:a._options.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))},this._options=t}return Object(p.a)(e,[{key:"register",value:function(e){return fetch("".concat(this._options.baseUrlAuth,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e.password,email:e.email})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"authorize",value:function(e){return fetch("".concat(this._options.baseUrlAuth,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e.password,email:e.email})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getContent",value:function(e){return fetch("".concat(this._options.baseUrlAuth,"/users/me"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._options.baseUrl,"/users/me"),{headers:this._options.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._options.baseUrl,"/users/me"),{method:"PATCH",headers:this._options.headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this._options.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._options.headers,body:JSON.stringify({avatar:e.avatar})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._options.baseUrl,"/cards"),{headers:this._options.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"setCard",value:function(e){return fetch("".concat(this._options.baseUrl,"/cards"),{method:"POST",headers:this._options.headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}}]),e}())(d),h=a(24),b=function(e){var t=e.component,a=Object(h.a)(e,["component"]);return o.a.createElement(u.b,null,(function(){return a.loggedIn?o.a.createElement(t,a):o.a.createElement(u.a,{to:"./"})}))},g=a(22),E=a(21),v=a.n(E);var N=function(e){var t=e.email,a=e.onSignOut,n=Object(g.a)(),i=o.a.useState(!1),c=Object(l.a)(i,2),s=c[0],m=c[1];function p(){a(),m(!1)}return o.a.createElement("header",{className:"header"},o.a.createElement(u.b,{path:"/main"},n<=767?o.a.createElement("div",{className:"header__mobile-menu ".concat(s?"header__mobile-menu_opened":"")},o.a.createElement("h2",{className:"header__email header__email_mobile"},t),o.a.createElement(r.b,{to:"/signin",className:"header__link header__link_mobile",onClick:p},"\u0412\u044b\u0439\u0442\u0438")):null),o.a.createElement("div",{className:"header__main-menu"},o.a.createElement("img",{src:v.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \xab\u041c\u0435\u0441\u0442\u043e \u0420\u043e\u0441\u0441\u0438\u044f\xbb",className:"header__logo"}),o.a.createElement(u.d,null,o.a.createElement(u.b,{path:"/signup"},o.a.createElement(r.b,{to:"/signin",className:"header__link"},"\u0412\u043e\u0439\u0442\u0438")),o.a.createElement(u.b,{path:"/signin"},o.a.createElement(r.b,{to:"/signup",className:"header__link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),o.a.createElement(u.b,{path:"/main"},n<=767?o.a.createElement("button",{type:"button",className:"header__mobile-button ".concat(s?"header__mobile-button_close":""),onClick:s?function(){m(!1)}:function(){m(!0)}}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"header__info"},o.a.createElement("h2",{className:"header__email"},t),o.a.createElement(r.b,{to:"/signin",className:"header__link header__link_main",onClick:p},"\u0412\u044b\u0439\u0442\u0438")))))))},C=o.a.createContext();var k=function(e){var t=e.card,a=e.onCardClick,i=e.onCardLike,c=e.onCardDelete,r=Object(n.useContext)(C),s=t.owner._id===r._id,l="trash-button ".concat(s?"trash-button_active":"trash-button_inactive"),u=t.likes.some((function(e){return e._id===r._id})),m="like-button ".concat(u?"like-button_active":"like-button_inactive");return o.a.createElement("li",{className:"cards__element"},o.a.createElement("img",{alt:t.name,className:"cards__image",src:t.link,onClick:function(){a({link:t.link,name:t.name})}}),o.a.createElement("button",{type:"button",className:l,onClick:function(){c(t)}}),o.a.createElement("div",{className:"cards__row"},o.a.createElement("h3",{className:"cards__title"},t.name),o.a.createElement("div",{className:"cards__column"},o.a.createElement("button",{type:"button",className:m,onClick:function(){i(t)}}),o.a.createElement("span",{className:"like-button__amount"},t.likes.length))))};var j=function(e){var t=e.cards,a=e.onEditProfile,i=e.onAddPlace,c=e.onEditAvatar,r=e.onCardClick,s=e.onCardLike,l=e.onCardDelete,u=Object(n.useContext)(C);return o.a.createElement("main",{className:"content"},o.a.createElement("section",{className:"profile"},o.a.createElement("div",{className:"profile__avatar"},o.a.createElement("img",{alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f",src:u.avatar,className:"profile__image"}),o.a.createElement("button",{type:"button",className:"profile__edit-avatar",onClick:c},o.a.createElement("svg",{className:"profile__edit-avatar_icon",width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M26 3.45351L6.76981 22.7932L3.33585 19.2903L22.517 0L26 3.45351ZM0 26L5.10189 24.4706L1.52075 21.0171L0 26Z",fill:"white"})))),o.a.createElement("div",{className:"profile__info"},o.a.createElement("div",{className:"profile__row"},o.a.createElement("h1",{className:"profile__title"},u.name),o.a.createElement("button",{type:"button",className:"edit-button",onClick:a},o.a.createElement("svg",{className:"edit-button__icon",width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M10 1.328L2.604 8.767 1.283 7.419 8.66 0 10 1.328zM0 10l1.962-.588L.585 8.083 0 10z",fill:"#fff"})))),o.a.createElement("p",{className:"profile__subtitle"},u.about)),o.a.createElement("button",{type:"button",className:"add-button",onClick:i},o.a.createElement("svg",{className:"add-button__icon",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M22 9.77778H12.2222V0H9.77778V9.77778H0V12.2222H9.77778V22H12.2222V12.2222H22V9.77778Z",fill:"white"})))),o.a.createElement("ul",{className:"cards list"},t.map((function(e){return o.a.createElement(k,{key:e._id,card:e,onCardClick:r,onCardLike:s,onCardDelete:l})}))))};var O=function(e){var t=e.onSubmit,a=o.a.useState(""),n=Object(l.a)(a,2),i=n[0],c=n[1],s=o.a.useState(""),u=Object(l.a)(s,2),m=u[0],p=u[1],d=o.a.useState({email:"",password:""}),f=Object(l.a)(d,2),h=f[0],b=f[1];function g(e){var t=e.target.value,a=h;c(t),_.email.test(t)?a.email="":a.email="\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 Email",b(a)}function E(e){var t=e.target.value,a=h;p(t),t.includes(" ")?a.password="\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b":t.length<6?a.password="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043a\u043e\u0440\u043e\u0447\u0435 6 \u0441\u0438\u043c\u0432. \u0414\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u0441\u0435\u0439\u0447\u0430\u0441: ".concat(t.length," \u0441\u0438\u043c\u0432."):a.password="",b(a)}return o.a.createElement("main",{className:"sign"},o.a.createElement("h1",{className:"sign__title"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),o.a.createElement("form",{className:"sign-form",onSubmit:function(e){e.preventDefault(),t({email:i,password:m})},noValidate:!0},o.a.createElement("fieldset",{className:"sign-form__set"},o.a.createElement("label",{className:"sign-form__field"},o.a.createElement("input",{type:"email",placeholder:"Email",autoComplete:"on",className:"sign-form__input",onChange:g,onFocus:g,id:"signup-email-input",name:"signupEmailInput",maxLength:"40",required:!0}),o.a.createElement("span",{className:"sign-form__input-error sign-form__input-error_active",id:"name-input-error"},h.email)),o.a.createElement("label",{className:"sign-form__field"},o.a.createElement("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",autoComplete:"off",className:"sign-form__input",onChange:E,onFocus:E,id:"signup-password-input",name:"signupPasswordInput",minLength:"6",maxLength:"20",required:!0}),o.a.createElement("span",{className:"sign-form__input-error sign-form__input-error_active",id:"name-input-error"},h.password)),o.a.createElement("button",{type:"submit",className:"sign-form__save-button ".concat(h.email||h.password||!i||!m?"sign-form__save-button_inactive":""),disabled:h.email||h.password||!i||!m},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))),o.a.createElement("h3",{className:"sign__question"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",o.a.createElement(r.b,{to:"/signin",className:"sign__link"},"\u0412\u043e\u0439\u0442\u0438")))};var L=function(e){var t=e.onSubmit,a=o.a.useState(""),n=Object(l.a)(a,2),i=n[0],c=n[1],s=o.a.useState(""),u=Object(l.a)(s,2),m=u[0],p=u[1],_=o.a.useState(""),d=Object(l.a)(_,2),f=d[0],h=d[1];function b(e){var t=e.target.value;h(""),c(t)}function g(e){var t=e.target.value;h(""),p(t)}return o.a.createElement("main",{className:"sign"},o.a.createElement("h1",{className:"sign__title"},"\u0412\u0445\u043e\u0434"),o.a.createElement("form",{className:"sign-form",onSubmit:function(e){e.preventDefault(),i&&m&&t({email:i,password:m}).then((function(e){e&&h("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}))},noValidate:!0},o.a.createElement("fieldset",{className:"sign-form__set"},o.a.createElement("label",{className:"sign-form__field"},o.a.createElement("input",{type:"email",placeholder:"Email",autoComplete:"on",className:"sign-form__input",onChange:b,onFocus:b,id:"signin-email-input",name:"signinEmailInput",minLength:"2",maxLength:"40",required:!0}),o.a.createElement("span",{className:"sign-form__input-error sign-form__input-error_active",id:"name-input-error"},f)),o.a.createElement("label",{className:"sign-form__field"},o.a.createElement("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",autoComplete:"off",className:"sign-form__input",onChange:g,onFocus:g,id:"signin-password-input",name:"signinPasswordInput",minLength:"6",maxLength:"20",required:!0}),o.a.createElement("span",{className:"sign-form__input-error sign-form__input-error_active",id:"name-input-error"},f)),o.a.createElement("button",{type:"submit",className:"sign-form__save-button"},"\u0412\u043e\u0439\u0442\u0438"))),o.a.createElement("h3",{className:"sign__question"},"\u0415\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",o.a.createElement(r.b,{to:"/signup",className:"sign__link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))};var w=function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))};var S=function(e){var t=e.title,a=e.name,n=e.isOpen,i=e.onClose,c=e.onSubmit,r=e.children;return o.a.createElement("section",{className:"popup popup_".concat(a," ").concat(n?"popup_opened":"")},o.a.createElement("form",{className:"popup__container popup__container_".concat(a),name:a,onSubmit:c,noValidate:!0},o.a.createElement("button",{type:"button",className:"popup__close-button",onClick:i}),o.a.createElement("h3",{className:"popup__title popup__title_".concat(a)},t),r))};var y=function(e){var t=e.isOpen,a=e.onClose,i=e.onUpdateUser,c=e.isLoading,r=Object(n.useState)(""),s=Object(l.a)(r,2),u=s[0],m=s[1],p=Object(n.useState)(""),d=Object(l.a)(p,2),f=d[0],h=d[1],b=Object(n.useState)({name:"",about:""}),g=Object(l.a)(b,2),E=g[0],v=g[1],N=Object(n.useContext)(C);function k(e){var t=e.target.value,a=E;m(t),t.length<2?a.name="\u0422\u0435\u043a\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043a\u043e\u0440\u043e\u0447\u0435 2 \u0441\u0438\u043c\u0432. \u0414\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u0441\u0435\u0439\u0447\u0430\u0441: ".concat(t.length," \u0441\u0438\u043c\u0432."):_.name.test(t)?a.name="":a.name="\u0422\u0435\u043a\u0441\u0442 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0446\u0438\u0444\u0440\u044b \u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u044b.",v(a)}function j(e){var t=e.target.value,a=E;h(t),t.length<2?a.about="\u0422\u0435\u043a\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043a\u043e\u0440\u043e\u0447\u0435 2 \u0441\u0438\u043c\u0432. \u0414\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u0441\u0435\u0439\u0447\u0430\u0441: ".concat(t.length," \u0441\u0438\u043c\u0432."):a.about="",v(a)}return o.a.useEffect((function(){m(N.name),h(N.about),v({name:"",about:""})}),[N,t]),o.a.createElement(S,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),i({name:u,about:f})}},o.a.createElement("fieldset",{className:"popup__set"},o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",value:u||"",onChange:k,onFocus:k,autoComplete:"off",className:"popup__input popup__input_text_name",id:"name-input",name:"nameInput",minLength:"2",maxLength:"40",required:!0,pattern:"[A-Za-z\u0410-\u042f\u0401\u0430-\u044f\u0451 -]{1,}"}),o.a.createElement("span",{className:"popup__input-error popup__input-error_active",id:"name-input-error"},E.name)),o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:f||"",onChange:j,onFocus:j,autoComplete:"off",className:"popup__input popup__input_text_description",id:"description-input",name:"descriptionInput",minLength:"2",maxLength:"200",required:!0}),o.a.createElement("span",{className:"popup__input-error popup__input-error_active",id:"description-input-error"},E.about)),o.a.createElement("button",{type:"submit",className:"popup__save-button ".concat(E.name||E.about||u===N.name&&f===N.about?"popup__save-button_inactive":""),disabled:c||E.name||E.about||u===N.name&&f===N.about},c?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))};var x=function(e){var t=e.isOpen,a=e.onClose,i=e.onUpdateAvatar,c=e.isLoading,r=Object(n.useRef)(""),s=Object(n.useState)(""),u=Object(l.a)(s,2),m=u[0],p=u[1];function d(e){var t=e.target.value,a=m;a=_.url.test(t)?"":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL.",p(a)}return o.a.useEffect((function(){r.current.value="",p("")}),[t]),o.a.createElement(S,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),i({avatar:r.current.value})}},o.a.createElement("fieldset",{className:"popup__set"},o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{ref:r,onChange:d,onFocus:d,type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",autoComplete:"off",className:"popup__input popup__input_text_link",id:"link-avatar-input",name:"avatarInput",required:!0}),o.a.createElement("span",{className:"popup__input-error popup__input-error_active",id:"link-avatar-input-error"},m)),o.a.createElement("button",{type:"submit",className:"popup__save-button ".concat(m||!r.current.value?"popup__save-button_inactive":""),disabled:c||m||!r.current.value},c?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))};var U=function(e){var t=e.isOpen,a=e.onClose,i=e.onAddPlace,c=e.isLoading,r=Object(n.useState)(""),s=Object(l.a)(r,2),u=s[0],m=s[1],p=Object(n.useState)(""),d=Object(l.a)(p,2),f=d[0],h=d[1],b=Object(n.useState)({name:"",link:""}),g=Object(l.a)(b,2),E=g[0],v=g[1];function N(e){var t=e.target.value,a=E;h(t),t.length<1?a.name="\u0422\u0435\u043a\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043a\u043e\u0440\u043e\u0447\u0435 1 \u0441\u0438\u043c\u0432. \u0414\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u0441\u0435\u0439\u0447\u0430\u0441: ".concat(t.length," \u0441\u0438\u043c\u0432."):a.name="",v(a)}function C(e){var t=e.target.value,a=E;m(t),_.url.test(t)?a.link="":a.link="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL.",v(a)}return o.a.useEffect((function(){m(""),h(""),v({name:"",link:""})}),[t]),o.a.createElement(S,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),i({name:f,link:u})}},o.a.createElement("fieldset",{className:"popup__set"},o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:f||"",onChange:N,onFocus:N,autoComplete:"off",className:"popup__input popup__input_text_place",id:"place-input",name:"placeInput",minLength:"1",maxLength:"30",required:!0}),o.a.createElement("span",{className:"popup__input-error popup__input-error_active",id:"place-input-error"},E.name)),o.a.createElement("label",{className:"popup__field"},o.a.createElement("input",{type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:u||"",onChange:C,onFocus:C,autoComplete:"off",className:"popup__input popup__input_text_link",id:"link-input",name:"linkInput",required:!0}),o.a.createElement("span",{className:"popup__input-error popup__input-error_active",id:"link-input-error"},E.link)),o.a.createElement("button",{type:"submit",className:"popup__save-button ".concat(E.name||E.link||!f||!u?"popup__save-button_inactive":""),disabled:c||E.name||E.link||!(f&&u)},c?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))};var P=function(e){var t=e.isOpen,a=e.selectedCardLink,n=e.selectedCardName,i=e.onClose;return o.a.createElement("section",{className:"popup ".concat(t&&"popup_opened")},o.a.createElement("figure",{className:"popup__image-container"},o.a.createElement("img",{alt:n,src:a,className:"popup__image"}),o.a.createElement("figcaption",{className:"popup__caption"},n),o.a.createElement("button",{type:"button",className:"popup__close-button",onClick:i})))};var I=function(e){var t=e.isOpen,a=e.onClose,n=e.onConfirm,i=e.isLoading;return o.a.createElement(S,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"trash",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n()}},o.a.createElement("button",{type:"submit",className:"popup__save-button",disabled:i},i?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430"))};var A=function(e){var t=e.isOpen,a=e.onClose,n=e.type;return o.a.createElement("section",{className:"popup popup_infotool ".concat(t?"popup_opened":"")},o.a.createElement("div",{className:"popup__container popup__container_infotool"},o.a.createElement("button",{type:"button",className:"popup__close-button",onClick:a}),n?o.a.createElement(o.a.Fragment,null,o.a.createElement("svg",{className:"popup__signup-icon",width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M117 60C117 91.4802 91.4802 117 60 117C28.5198 117 3 91.4802 3 60C3 28.5198 28.5198 3 60 3C91.4802 3 117 28.5198 117 60ZM120 60C120 93.1371 93.1371 120 60 120C26.8629 120 0 93.1371 0 60C0 26.8629 26.8629 0 60 0C93.1371 0 120 26.8629 120 60ZM57.5502 76.888L86.7676 48.888L81.2324 43.112L54.4277 68.7999L39.3496 57.8561L34.6504 64.3305L52.433 77.2372L55.1375 79.2001L57.5502 76.888Z",fill:"black"})),o.a.createElement("h3",{className:"popup__title popup__title_infotool"},"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!")):o.a.createElement(o.a.Fragment,null,o.a.createElement("svg",{className:"popup__signup-icon",width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M60 117C91.4802 117 117 91.4802 117 60C117 28.5198 91.4802 3 60 3C28.5198 3 3 28.5198 3 60C3 91.4802 28.5198 117 60 117ZM60 120C93.1371 120 120 93.1371 120 60C120 26.8629 93.1371 0 60 0C26.8629 0 0 26.8629 0 60C0 93.1371 26.8629 120 60 120ZM55.0503 60.707L36.6655 42.3223L42.3224 36.6654L60.7071 55.0502L78.3848 37.3726L84.0416 43.0294L66.364 60.707L83.3346 77.6776L77.6777 83.3345L60.7071 66.3639L43.0294 84.0416L37.3726 78.3848L55.0503 60.707Z",fill:"#FD0707"})),o.a.createElement("h3",{className:"popup__title popup__title_infotool"},"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."))))};var D=function(){var e=o.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],i=o.a.useState(!1),c=Object(l.a)(i,2),r=c[0],m=c[1],p=o.a.useState(!1),_=Object(l.a)(p,2),d=_[0],h=_[1],g=o.a.useState(!1),E=Object(l.a)(g,2),v=E[0],k=E[1],S=o.a.useState(!1),D=Object(l.a)(S,2),F=D[0],M=D[1],T=o.a.useState(!1),q=Object(l.a)(T,2),Z=q[0],V=q[1],z=o.a.useState(!1),H=Object(l.a)(z,2),R=H[0],B=H[1],J=o.a.useState([]),$=Object(l.a)(J,2),G=$[0],K=$[1],Q=o.a.useState({link:"",name:""}),W=Object(l.a)(Q,2),X=W[0],Y=W[1],ee=o.a.useState([]),te=Object(l.a)(ee,2),ae=te[0],ne=te[1],oe=o.a.useState({}),ie=Object(l.a)(oe,2),ce=ie[0],re=ie[1],se=o.a.useState(!1),le=Object(l.a)(se,2),ue=le[0],me=le[1],pe=o.a.useState(!1),_e=Object(l.a)(pe,2),de=_e[0],fe=_e[1],he=o.a.useState({id:"",email:""}),be=Object(l.a)(he,2),ge=be[0],Ee=be[1],ve=Object(u.g)();o.a.useEffect((function(){Promise.all([f.getUserInfo(),f.getInitialCards()]).then((function(e){re(e[0]),K(e[1])})).catch((function(e){console.log(e)}))}),[]),o.a.useEffect((function(){function e(e){"Escape"===e.key&&Ce()}function t(e){e.target.classList.contains("popup_opened")&&Ce()}return document.addEventListener("click",t),document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("click",t)}}),[]);var Ne=o.a.useCallback((function(){var e=localStorage.getItem("jwt");e&&f.getContent(e).then((function(e){e&&(Ee({id:e.data._id,email:e.data.email}),fe(!0),ve.push("/"))})).catch((function(e){console.log(e),localStorage.removeItem("jwt"),B(!1),V(!0),ve.push("/signin")}))}),[ve,de]);function Ce(){n(!1),m(!1),h(!1),k(!1),M(!1),V(!1),me(!1)}return o.a.useEffect((function(){Ne()}),[Ne]),o.a.createElement(C.Provider,{value:ce},o.a.createElement("div",{className:"page"},o.a.createElement(N,{email:ge.email,onSignOut:function(){localStorage.removeItem("jwt"),ve.push("/signin"),fe(!1)}}),o.a.createElement(u.d,null,o.a.createElement(b,{path:"/main",component:j,cards:G,onEditProfile:function(){m(!0)},onAddPlace:function(){h(!0)},onEditAvatar:function(){n(!0)},onCardClick:function(e){k(!0),Y({link:e.link,name:e.name})},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===ce._id}));f.changeLikeCardStatus(e._id,t).then((function(t){var a=G.map((function(a){return a._id===e._id?t:a}));K(a)})).catch((function(e){console.log(e)}))},onCardDelete:function(e){ne(e),M(!0)},loggedIn:de}),o.a.createElement(u.b,{path:"/signup"},o.a.createElement(O,{onSubmit:function(e){f.register(e).then((function(e){B(!0),V(!0),ve.push("/")})).catch((function(e){console.log(e)}))}})),o.a.createElement(u.b,{path:"/signin"},o.a.createElement(L,{onSubmit:function(e){return f.authorize(e).then((function(e){fe(!0),localStorage.setItem("jwt",e.token),ve.push("/")})).catch((function(e){return console.log(e),B(!1),V(!0),e}))}})),o.a.createElement(u.b,{exact:!0,path:"/"},de?o.a.createElement(u.a,{to:"/main"}):o.a.createElement(u.a,{to:"/signin"}))),o.a.createElement(x,{isOpen:a,onClose:Ce,onUpdateAvatar:function(e){me(!0),f.setUserAvatar(e).then((function(e){re(e)})).then((function(){Ce()})).catch((function(e){console.log(e)}))},isLoading:ue}),o.a.createElement(y,{isOpen:r,onClose:Ce,onUpdateUser:function(e){me(!0),f.setUserInfo(e).then((function(e){re(e)})).then((function(){Ce()})).catch((function(e){console.log(e)}))},isLoading:ue}),o.a.createElement(U,{isOpen:d,onClose:Ce,onAddPlace:function(e){me(!0),f.setCard(e).then((function(e){K([e].concat(Object(s.a)(G)))})).then((function(){Ce()})).catch((function(e){console.log(e)}))},isLoading:ue}),o.a.createElement(P,{isOpen:v,selectedCardLink:X.link,selectedCardName:X.name,onClose:Ce}),o.a.createElement(I,{isOpen:F,onClose:Ce,onConfirm:function(){me(!0),f.removeCard(ae._id).then((function(){var e=G.filter((function(e){return e._id!==ae._id}));K(e)})).then((function(){Ce()})).catch((function(e){console.log(e)}))},isLoading:ue}),o.a.createElement(A,{isOpen:Z,onClose:Ce,type:R}),o.a.createElement(w,null)))};c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(r.a,{basename:"/react-mesto-auth"},o.a.createElement(D,null))),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.c6204d42.chunk.js.map